(function(t){function e(e){for(var a,n,s=e[0],l=e[1],c=e[2],u=0,h=[];u<s.length;u++)n=s[u],i[n]&&h.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],a=!0,s=1;s<o.length;s++){var l=o[s];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=n(n.s=o[0]))}return t}var a={},i={app:0},r=[];function n(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=a,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var a=o("64a9"),i=o.n(a);i.a},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[null===t.jwtToken?o("div",[o("LoginComponent",{on:{loginSuccess:t.handleLogin}})],1):o("div",[null!==t.jwtToken?o("GameStage",{attrs:{"jwt-token":t.jwtToken}}):t._e(),null!==t.jwtToken?o("UserInfo",{attrs:{"jwt-token":t.jwtToken}}):t._e(),null!==t.jwtToken?o("Betting",{attrs:{"jwt-token":t.jwtToken}}):t._e(),null!==t.jwtToken?o("GameInfo",{attrs:{"jwt-token":t.jwtToken}}):t._e(),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{staticStyle:{width:"98%","margin-top":"10px",height:"50px"},attrs:{type:"danger"},on:{click:t.logOut}},[t._v("退出登录")])],1)],1)])},r=[],n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{attrs:{id:"game_body"}})])}],l=(o("55dd"),o("e814")),c=o.n(l),d=o("f499"),u=o.n(d),h=o("bc3a"),p=o.n(h),f=o("912c"),w=null,m={fullView:null},g={horses:[],track:null,concrete:null,steel_fender:null,grass_fender:null,seat:null,seat_exit:null,seat_stair:null,road_decoration:null,track_floor:null,sign:null,audiences:[],waitingHorses:[],start_line:null,end_line:null},_=function(){};function v(t,e){return Math.floor(Math.random()*(e-t+1))+t}var y={name:"GameStage",props:{jwtToken:String},data:function(){return{engineIntv:5e3,highIntv:1e3,lowIntv:5e3,loaderEngine:null,distances:[],track_win:[],hasWinner:!1}},methods:{loader:function(){var t=this;p.a.get(this.apiServer+"/status",{headers:{Authorization:this.jwtToken}}).then(function(e){var o=JSON.parse(u()(e.data));if(c()(o.isGaming)&&t.engineIntv===t.lowIntv){for(var a=0;a<g.waitingHorses.length;a++)m.fullView.removeChild(g.waitingHorses[a]),m.fullView.addChild(g.horses[a]);_=t.runState,t.track_win=[],t.hasWinner=!1,clearInterval(t.loaderEngine),t.engineIntv=t.highIntv,t.loaderEngine=setInterval(t.loader,t.engineIntv)}else if(!c()(o.isGaming)&&t.engineIntv===t.highIntv){for(var i=0;i<o.track_win.length;i++)t.track_win.push(o.track_win[i]);t.hasWinner=!0;for(var r=0;r<g.horses.length;r++)g.horses[r].x=t.distances[r]/100*(m.fullView.width-150-window.innerWidth)+(20+8*g.horses.length-8*(r-1));for(var n=0;n<g.horses.length;n++)g.waitingHorses[n].x=g.horses[n].x,m.fullView.removeChild(g.horses[n]),m.fullView.addChild(g.waitingHorses[n]);_=t.endingState,clearInterval(t.loaderEngine),t.engineIntv=t.lowIntv,t.loaderEngine=setInterval(t.loader,t.engineIntv)}for(var s=0;s<o.distances.length;s++)t.distances[s]=c()(o.distances[s])})},cameraScroll:function(){for(var t=[],e=0;e<g.horses.length;e++)t.push(g.horses[e].x);t.sort(function(t,e){return e-t});var o=t[0];o>=window.innerWidth-150-m.fullView.x&&(m.fullView.x-=o-(window.innerWidth-150-m.fullView.x))},horseRunRandomlyState:function(){for(var t=0;t<g.horses.length;t++){var e=v(1,2),o=v(1,2)/10;1===e?(g.horses[t].vx+=o,g.horses[t].x+=g.horses[t].vx):g.horses[t].vx-o>=0&&(g.horses[t].vx-=o,g.horses[t].x+=g.horses[t].vx)}this.cameraScroll(),m.fullView.x<=-2350+window.innerWidth&&(_=this.endingState)},runState:function(){for(var t=0;t<g.horses.length;t++)g.horses[t].x=this.distances[t]/100*(m.fullView.width-150-window.innerWidth)+(20+8*g.horses.length-8*(t-1));this.cameraScroll()},endingState:function(){var t=this;setTimeout(function(){for(var e=8,o=20,a=0;a<g.waitingHorses.length;a++)g.waitingHorses[a].x=o+e*g.waitingHorses.length-e*(a-1);_=t.waitingState,t.eventBus.$emit("updateUserInfo")},1e4)},waitingState:function(){m.fullView.x=0},gameLoop:function(t){_(t)},gameLoadSetup:function(){var t=this,e=f["loader"].resources["images/fastma_spritesheet.json"].spritesheet;m.fullView=new f["Container"];for(var o=0;o<8;o++)for(var a=0;a<=40;a++)g.concrete=new f["Sprite"](e.textures["concrete.png"]),g.concrete.x=g.concrete.width*a-o%2*30,g.concrete.y=15*o-15-o,m.fullView.addChild(g.concrete);for(var i=0;i<=20;i++)g.steel_fender=new f["Sprite"](e.textures["steel_fender_1.png"]),g.steel_fender.y=30,g.steel_fender.x=g.steel_fender.width*i,m.fullView.addChild(g.steel_fender);for(var r=0;r<=15;r++)g.steel_fender=new f["Sprite"](e.textures["grass_fender_1.png"]),g.steel_fender.y=37,g.steel_fender.x=g.steel_fender.width*r+100*r,m.fullView.addChild(g.steel_fender);for(var n=230,s=0;s<5;s++)0===s||4===s?(g.seat_stair=new f["Sprite"](e.textures["seat_stair.png"]),g.seat_stair.x=n,g.seat_stair.y=-12,m.fullView.addChild(g.seat_stair),n+=g.seat_stair.width):(g.seat=new f["Sprite"](e.textures["seat.png"]),g.seat_exit=new f["Sprite"](e.textures["seat_exit.png"]),g.seat.x=n,m.fullView.addChild(g.seat),n+=g.seat.width,g.seat_exit.x=n,m.fullView.addChild(g.seat_exit),n+=g.seat_exit.width);n+=150;for(var l=0;l<5;l++)0===l||4===l?(g.seat_stair=new f["Sprite"](e.textures["seat_stair.png"]),g.seat_stair.x=n,m.fullView.addChild(g.seat_stair),n+=g.seat_stair.width):(g.seat=new f["Sprite"](e.textures["seat.png"]),g.seat_exit=new f["Sprite"](e.textures["seat_exit.png"]),g.seat.x=n,m.fullView.addChild(g.seat),n+=g.seat.width,g.seat_exit.x=n,m.fullView.addChild(g.seat_exit),n+=g.seat_exit.width);n+=150;for(var c=0;c<5;c++)0===c||4===c?(g.seat_stair=new f["Sprite"](e.textures["seat_stair.png"]),g.seat_stair.x=n,m.fullView.addChild(g.seat_stair),n+=g.seat_stair.width):(g.seat=new f["Sprite"](e.textures["seat.png"]),g.seat_exit=new f["Sprite"](e.textures["seat_exit.png"]),g.seat.x=n,m.fullView.addChild(g.seat),n+=g.seat.width,g.seat_exit.x=n,m.fullView.addChild(g.seat_exit),n+=g.seat_exit.width);for(var d=0;d<5;d++)for(var u=1;u<=10;u++)g.audiences.push(new f["extras"].AnimatedSprite(e.animations["audience".concat(u)]));for(var h=0;h<g.audiences.length;h++)g.audiences[h].y=55+v(0,100)/100*10,g.audiences[h].x=200+v(0,100)/100*2100,g.audiences[h].animationSpeed=.1,g.audiences[h].play(),m.fullView.addChild(g.audiences[h]);for(var p=0;p<10;p++)g.track=new f["Sprite"](e.textures["track.png"]),g.track.y=50,g.track.x=g.track.width*p-p,m.fullView.addChild(g.track);g.road_decoration=new f["Sprite"](e.textures["road_decoration.png"]),g.road_decoration.x=125,g.road_decoration.y=40,m.fullView.addChild(g.road_decoration);for(var _=0;_<11;_++)for(var y=0;y<=40;y++)g.track_floor=new f["Sprite"](e.textures["track_floor.png"]),g.track_floor.x=g.track_floor.width*y-_%2*30,g.track_floor.y=174+15*_-_,m.fullView.addChild(g.track_floor);for(var k=0;k<22;k++)for(var S=0;S<=40;S++)g.track_floor=new f["Sprite"](e.textures["track_floor.png"]),g.track_floor.x=g.track_floor.width*S-k%2*30-8*k,g.track_floor.y=174+15*k-k-8*k,m.fullView.addChild(g.track_floor);g.start_line=new f["Sprite"](e.textures["start_end_line.png"]),g.end_line=new f["Sprite"](e.textures["start_end_line.png"]),g.start_line.x=90,g.start_line.y=120,g.end_line.x=2240,g.end_line.y=120,m.fullView.addChild(g.start_line),m.fullView.addChild(g.end_line);for(var x=25,b=8,T=20,C=120,I=1;I<=8;I++)g.horses.push(new f["extras"].AnimatedSprite(e.animations["horse".concat(I)]));for(var H=0;H<g.horses.length;H++)g.horses[H].vx=0,g.horses[H].animationSpeed=.1,g.horses[H].play(),g.horses[H].x=T+b*g.horses.length-b*(H-1),g.horses[H].y=C+x*(H-1);for(var j=1;j<=8;j++)g.waitingHorses.push(new f["Sprite"](e.textures["horse".concat(j,"_01.png")]));for(var z=0;z<g.waitingHorses.length;z++)g.waitingHorses[z].vx=0,g.waitingHorses[z].x=T+b*g.waitingHorses.length-b*(z-1),g.waitingHorses[z].y=C+x*(z-1),m.fullView.addChild(g.waitingHorses[z]);for(var U=0;U<10;U++)g.track=new f["Sprite"](e.textures["track.png"]),g.track.y=280,g.track.x=g.track.width*U-U,m.fullView.addChild(g.track);g.sign=new f["Sprite"](e.textures["sign.png"]),g.road_decoration=new f["Sprite"](e.textures["road_decoration.png"]),g.sign.y=280,g.sign.x=2200,m.fullView.addChild(g.sign),g.road_decoration.y=260,g.road_decoration.x=2225,m.fullView.addChild(g.road_decoration),w.stage.addChild(m.fullView),w.ticker.add(function(e){return t.gameLoop(e)})}},mounted:function(){w=new f["Application"]({width:window.innerWidth-15,height:365,antialias:!1,transparent:!1,resolution:1}),document.getElementById("game_body").appendChild(w.view),f["loader"].add("images/fastma_spritesheet.json").load(this.gameLoadSetup),this.loader(),this.loaderEngine=setInterval(this.loader,this.engineIntv)},beforeDestroy:function(){clearInterval(this.loaderEngine)}},k=y,S=o("2877"),x=Object(S["a"])(k,n,s,!1,null,"264a9838",null),b=x.exports,T=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticStyle:{"margin-top":"10px"}},[o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",placeholder:"下注金额（整数）",type:"number"},model:{value:t.stake_token,callback:function(e){t.stake_token=e},expression:"stake_token"}}),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:16}},[o("el-select",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"请选择赛道"},model:{value:t.selectedTrack,callback:function(e){t.selectedTrack=e},expression:"selectedTrack"}},t._l(t.tracks,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),o("el-col",{attrs:{span:8}},[o("el-button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"primary"},on:{click:t.doBet}},[t._v("投注")])],1)],1),o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.betHistoryData,height:"150"}},[o("el-table-column",{attrs:{prop:"stake_token",label:"下注金额","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"racetrack_id",label:"赛道"}}),o("el-table-column",{attrs:{prop:"userid",label:"用户ID"}}),o("el-table-column",{attrs:{prop:"time",label:"时间","show-overflow-tooltip":""}})],1)],1)},C=[],I={name:"BettingOption",props:{jwtToken:String},mounted:function(){var t=this;this.loadAllBetHistory(),this.historyLoadEngine=setInterval(function(){t.loadAllBetHistory()},5e3)},beforeDestroy:function(){clearInterval(this.historyLoadEngine)},methods:{doBet:function(){var t=this;null!==this.selectedTrack&&null!==this.stake_token&&p.a.post(this.apiServer+"/order",{stake_token:this.stake_token,racetrack_id:this.selectedTrack},{headers:{Authorization:this.jwtToken}}).then(function(e){e.data.status?(t.stake_token=null,t.selectedTrack=null,t.$notify({title:"投注成功",type:"success",position:"bottom-right"}),t.eventBus.$emit("updateUserInfo")):t.$notify({title:e.data.content,type:"error",position:"bottom-right"})})},loadAllBetHistory:function(){var t=this;p.a.get(this.apiServer+"/allorder",{headers:{Authorization:this.jwtToken}}).then(function(e){var o=e.data;t.betHistoryData=[];for(var a=0;a<o.length;a++)t.betHistoryData.push({stake_token:o[a].stake_token,racetrack_id:o[a].racetrack_id,time:o[a].time,userid:o[a].userid})})}},data:function(){return{historyLoadEngine:null,betHistoryData:[],stake_token:null,selectedTrack:null,tracks:[{value:0,label:"1"},{value:1,label:"2"},{value:2,label:"3"},{value:3,label:"4"},{value:4,label:"5"},{value:5,label:"6"},{value:6,label:"7"},{value:7,label:"8"}]}}},H=I,j=Object(S["a"])(H,T,C,!1,null,"339f16f9",null),z=j.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.card_shown?t._e():o("el-card",{staticClass:"form-card"},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"24px"}},[t._v("请登录")]),o("div",{staticStyle:{"margin-top":"10px"}},[o("label",{staticStyle:{width:"30%"}},[t._v("账户名：")]),o("el-input",{staticStyle:{width:"70%"},attrs:{autocapitalize:"off",autocorrect:"off"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),o("div",{staticStyle:{"margin-top":"10px"}},[o("label",{staticStyle:{width:"30%"}},[t._v("    密码：")]),o("el-input",{staticStyle:{width:"70%"},attrs:{autocapitalize:"off",autocorrect:"off","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("div",[o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},attrs:{type:"primary"},on:{click:t.doLogin}},[t._v("登录")]),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.switchCard}},[t._v("还没有账户，注册")])],1)])]),t.card_shown?o("el-card",{staticClass:"form-card"},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"24px"}},[t._v("请注册")]),o("div",{staticStyle:{"margin-top":"10px"}},[o("label",{staticStyle:{width:"30%"}},[t._v("账户名：")]),o("el-input",{staticStyle:{width:"70%"},attrs:{autocapitalize:"off",autocorrect:"off"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),o("div",{staticStyle:{"margin-top":"10px"}},[o("label",{staticStyle:{width:"30%"}},[t._v("    密码：")]),o("el-input",{staticStyle:{width:"70%"},attrs:{autocapitalize:"off",autocorrect:"off","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("div",{staticStyle:{"margin-top":"10px"}},[o("label",{staticStyle:{width:"30%"}},[t._v("确认密码：")]),o("el-input",{staticStyle:{width:"70%"},attrs:{autocapitalize:"off",autocorrect:"off","show-password":""},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}}),t._v("   ")],1),o("div",[o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},attrs:{type:"primary"},on:{click:t.doRegister}},[t._v("注册")]),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.switchCard}},[t._v("已有账号，登录")])],1)])]):t._e()],1)},V=[],W={data:function(){return{card_shown:0,username:null,password:null,confirm_password:null}},methods:{switchCard:function(){this.card_shown?this.card_shown=0:this.card_shown=1},doRegister:function(){var t=this;null===this.username||null===this.password||null===this.confirm_password?this.$notify({title:"未填写账户名/密码",type:"error",position:"bottom-right"}):this.password!==this.confirm_password?this.$notify({title:"两次输入的密码不一致",type:"error",position:"bottom-right"}):p.a.post(this.apiServer+"/register",{username:this.username,password:this.password}).then(function(e){0===e.data.code?(t.$notify({title:"注册成功",type:"success",position:"bottom-right",duration:2e3}),t.card_shown=0):t.$notify({title:e.data.content,type:"error",position:"bottom-right"})})},doLogin:function(){var t=this;null===this.username||null===this.password?this.$notify({title:"未填写账户名/密码",type:"error",position:"bottom-right"}):p.a.post(this.apiServer+"/login",{username:this.username,password:this.password}).then(function(e){0===e.data.code?t.$emit("loginSuccess",e.data.token):t.$notify({title:e.data.content,type:"error"})})}},name:"LoginComponent"},E=W,$=(o("5d55"),Object(S["a"])(E,U,V,!1,null,"6176fdca",null)),B=$.exports,O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",[o("div",{staticClass:"info-text"},[o("span",[t._v("用户名："+t._s(t.username))]),o("span",{staticStyle:{float:"right"}},[t._v("余额："+t._s(t.balance))]),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.showTopUp&&!t.showTopUpHistory&&!t.showWithdraw&&!t.showWithdrawHistory,expression:"!showTopUp && !showTopUpHistory && !showWithdraw && !showWithdrawHistory"}]},[o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},attrs:{type:"primary"},on:{click:t.toggleTopUp}},[t._v("充值")]),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.toggleTopUpHistory}},[t._v("充值历史")]),o("br"),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.toggleWithdraw}},[t._v("提现")]),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.toggleWithdrawHistory}},[t._v("提现历史")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showTopUp,expression:"showTopUp"}]},[o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",placeholder:"Token数（100的倍数）",type:"number"},model:{value:t.order_size,callback:function(e){t.order_size=e},expression:"order_size"}}),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},attrs:{type:"primary"},on:{click:t.goTopUp}},[t._v("去购买")]),o("el-button",{staticStyle:{"font-family":"'Noto Serif SC', serif"},on:{click:t.toggleTopUp}},[t._v("取消")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showTopUpHistory,expression:"showTopUpHistory"}]},[o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.topUpHistoryData,height:"150"}},[o("el-table-column",{attrs:{prop:"cb_id",label:"充值ID"}}),o("el-table-column",{attrs:{prop:"order_size",label:"充值数"}}),o("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{disabled:0!==e.row.status,size:"medium",type:0===e.row.status?"primary":"default"},on:{click:function(o){return t.goCoinbasePage(e.row.cb_id)}}},[t._v("\n                            "+t._s(0===e.row.status?"去转账":"已完成")+"\n                        ")])]}}])})],1),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.toggleTopUpHistory}},[t._v("返回")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showWithdraw,expression:"showWithdraw"}]},[o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",placeholder:"EOS 账户名"},model:{value:t.eos_account,callback:function(e){t.eos_account=e},expression:"eos_account"}}),o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",placeholder:"Memo (提现到交易所必须填写充值Memo)"},model:{value:t.eos_memo,callback:function(e){t.eos_memo=e},expression:"eos_memo"}}),o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",placeholder:"提现的 Token 数（100的倍数）",type:"number"},model:{value:t.withdraw_amount,callback:function(e){t.withdraw_amount=e},expression:"withdraw_amount"}}),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},attrs:{type:"primary"},on:{click:t.goWithdraw}},[t._v("提现")]),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.toggleWithdraw}},[t._v("返回")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showWithdrawHistory,expression:"showWithdrawHistory"}]},[o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.withdrawHistoryData,height:"150"}},[o("el-table-column",{attrs:{prop:"amount_eos",label:"EOS","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"amount_token",label:"Token"}}),o("el-table-column",{attrs:{prop:"eos_account",label:"EOS账户","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"eos_memo",label:"Memo"}}),o("el-table-column",{attrs:{prop:"if_done",label:"状态"}}),o("el-table-column",{attrs:{prop:"txid",label:"txid","show-overflow-tooltip":""}})],1),o("el-button",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"},on:{click:t.toggleWithdrawHistory}},[t._v("返回")])],1)])])},N=[],D={name:"UserInfo",props:{jwtToken:String},data:function(){return{showWithdrawHistory:!1,eos_account:null,eos_memo:null,withdraw_amount:null,balance:null,username:null,showTopUp:!1,order_size:null,showTopUpHistory:!1,topUpHistoryData:[],showWithdraw:!1,withdrawHistoryData:[]}},mounted:function(){var t=this;this.eventBus.$on("updateUserInfo",function(){t.getUserInfo()})},methods:{toggleWithdrawHistory:function(){var t=this;this.showWithdrawHistory=!this.showWithdrawHistory,p.a.get(this.apiServer+"/withdraw",{headers:{Authorization:this.jwtToken}}).then(function(e){if(e.data.status){var o=e.data.result;t.withdrawHistoryData=[];for(var a=0;a<o.length;a++)t.withdrawHistoryData.push({amount_eos:o[a].amount_eos,amount_token:o[a].amount_token,eos_account:o[a].eos_account,eos_memo:o[a].eos_memo,if_done:0===c()(o[a].if_done)?"等待处理":"已转账",txid:o[a].txid})}else t.$notify({title:"Server Error...",type:"error",position:"bottom-right"})})},goWithdraw:function(){var t=this;null!==this.withdraw_amount&&this.withdraw_amount%100===0&&0!==this.withdraw_amount&&null!==this.eos_account?p.a.post(this.apiServer+"/withdraw",{eos_memo:this.eos_memo?this.eos_memo:" ",eos_account:this.eos_account,amount_token:this.withdraw_amount},{headers:{Authorization:this.jwtToken}}).then(function(e){e.data.status?(t.eos_account=null,t.eos_memo=null,t.withdraw_amount=null,t.$notify({title:"提现成功，请等待程序自动结算",type:"success",position:"bottom-right"}),t.getUserInfo(),t.showWithdraw=!1):t.$notify({title:e.data.result,type:"error",position:"bottom-right"})}):this.$notify({title:"Token数量填写错误",type:"error",position:"bottom-right"})},toggleWithdraw:function(){this.showWithdraw=!this.showWithdraw},toggleTopUpHistory:function(){var t=this;this.showTopUpHistory=!this.showTopUpHistory,p.a.get(this.apiServer+"/topup",{headers:{Authorization:this.jwtToken}}).then(function(e){if(e.data.status){var o=e.data.result;t.topUpHistoryData=[];for(var a=0;a<o.length;a++)t.topUpHistoryData.push({cb_id:o[a].cb_id,order_size:o[a].order_size,status:c()(o[a].if_done)})}else t.$notify({title:"Server Error...",type:"error",position:"bottom-right"})})},toggleTopUp:function(){this.showTopUp=!this.showTopUp},goCoinbasePage:function(t){window.open("https://commerce.coinbase.com/charges/"+t)},goTopUp:function(){var t=this;null!==this.order_size&&this.order_size%100===0&&0!==this.order_size?p.a.post(this.apiServer+"/topup",{order_size:this.order_size},{headers:{Authorization:this.jwtToken}}).then(function(e){e.data.status?(t.toggleTopUp(),t.toggleTopUpHistory()):t.$notify({title:"Server Error...",type:"error",position:"bottom-right"})}):this.$notify({title:"Token数量填写错误",type:"error",position:"bottom-right"})},getUserInfo:function(){var t=this;p.a.get(this.apiServer+"/userInfo",{headers:{Authorization:this.jwtToken}}).then(function(e){t.balance=e.data.balance,t.username=e.data.username})}},created:function(){this.getUserInfo()}},L=D,A=(o("bfa6"),Object(S["a"])(L,O,N,!1,null,"61ebddb7",null)),G=A.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticStyle:{"margin-top":"10px","font-family":"'Noto Serif SC', serif"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n        游戏状态信息\n    ")]),o("el-card",[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("赛马信息:")]),o("span",[t._v("本轮获胜🐎: "+t._s(t.game_status.track_win&&t.game_status.track_win.length?t.game_status.track_win:"暂未分出胜负"))]),o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.racetracks,height:"220"}},[o("el-table-column",{attrs:{prop:"total_token",label:"总下注量","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"distance",label:"跑出距离","show-overflow-tooltip":""}})],1)],1),o("el-card",{staticStyle:{"margin-top":"10px"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("游戏状态:")]),o("div",[o("div",[t._v("游戏状态："+t._s(t.game_status.isGaming?"比赛开始":"等待开始"))]),o("div",[t._v("下注状态："+t._s(t.game_status.isBetting?"可以下注":"下注停止"))]),o("div",[t._v("结算状态："+t._s(t.game_status.isGaming||t.game_status.isBetting?"未开始结算":"结算冷却时间"))]),o("div",[t._v("游戏局数：第 "+t._s(t.game_status.iteration)+" 局")])])]),o("el-card",{staticStyle:{"margin-top":"10px"}},[o("div",{attrs:{slot:"header"},slot:"header"},[t._v("选用的BlockID:")]),o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.block_ids,height:"150"}},[o("el-table-column",{attrs:{prop:"blockid",label:"BlockID","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"time",label:"Time","show-overflow-tooltip":""}})],1)],1)],1)},P=[],J={name:"GameInfo",props:{jwtToken:String},mounted:function(){var t=this;this.loadInfo(),this.loadBlockId(),this.infoLoadEngine=setInterval(function(){t.loadInfo(),t.loadBlockId()},1e4)},beforeDestroy:function(){clearInterval(this.infoLoadEngine)},methods:{loadInfo:function(){var t=this;p.a.get(this.apiServer+"/status",{headers:{Authorization:this.jwtToken}}).then(function(e){var o=JSON.parse(u()(e.data));t.game_status.isGaming=c()(o.isGaming),t.game_status.isBetting=c()(o.isBetting),t.game_status.track_win=o.track_win,t.game_status.iteration=o.iteration,t.racetracks=[];for(var a=0;a<o.racetracks.length;a++)t.racetracks.push({total_token:o.racetracks[a].total_token,distance:o.distances[a]})})},loadBlockId:function(){var t=this;p.a.get(this.apiServer+"/blockid_backup",{headers:{Authorization:this.jwtToken}}).then(function(e){t.block_ids=e.data})}},data:function(){return{infoLoadEngine:null,block_ids:[],game_status:{isGaming:null,isBetting:null,track_win:null,iteration:null},racetracks:[]}}},R=J,q=Object(S["a"])(R,M,P,!1,null,"c3e60644",null),F=q.exports,K={name:"app",components:{GameStage:b,Betting:z,LoginComponent:B,UserInfo:G,GameInfo:F},data:function(){return{jwtToken:null}},mounted:function(){var t=window.localStorage,e=t.getItem("zmkm");e&&(this.jwtToken=e)},methods:{handleLogin:function(t){var e=window.localStorage;e.setItem("zmkm",t),this.jwtToken=t},logOut:function(){var t=window.localStorage;t.removeItem("zmkm"),this.jwtToken=null}}},Q=K,X=(o("034f"),Object(S["a"])(Q,i,r,!1,null,null,null)),Y=X.exports,Z=o("5c96"),tt=o.n(Z),et=(o("0fae"),o("b2d6")),ot=o.n(et);a["default"].use(tt.a,{locale:ot.a}),a["default"].config.productionTip=!1;var at="https://www.fastma.io";a["default"].prototype.apiServer=at+"/api",a["default"].prototype.eventBus=new a["default"],new a["default"]({render:function(t){return t(Y)}}).$mount("#app")},"5d55":function(t,e,o){"use strict";var a=o("c639"),i=o.n(a);i.a},"64a9":function(t,e,o){},a8dc:function(t,e,o){},bfa6:function(t,e,o){"use strict";var a=o("a8dc"),i=o.n(a);i.a},c639:function(t,e,o){}});
//# sourceMappingURL=app.7411e0f3.js.map